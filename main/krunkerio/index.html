<!DOCTYPE html>
<html lang="en">

<head>
	<meta charset="UTF-8">
	<title>Krunker Offline</title>
	<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0">
	<link rel="shortcut icon" type="image/png" href="./img/favicon.png">
	<link rel="stylesheet" href="/css/main.css">
	<style>
		/* BASE UI - PRECISA ACUPAR NO SPACE PARA FILHOS FUNCIONAREM */
		/* Mas escondemos visualmente */
		#uiBase {
			position: absolute;
			top: 0;
			left: 0;
			width: 100%;
			height: 100%;
			pointer-events: none;
			/* Deixa cliques passarem pro canvas */
			/* Não use display:none aqui pois mata os filhos */
		}

		/* MENUS ESPECÍFICOS PARA ESCONDER */
		#menuHolder,
		#instructions,
		#instructionHolder,
		#errorNotification,
		#aHolder,
		#overlay,
		#nukeFlash,
		#consentBlock,
		#spectateUI {
			display: none !important;
			opacity: 0 !important;
			pointer-events: none !important;
			z-index: -9999 !important;
		}

		/* CHAT UI - MANTEMOS VAZIO MAS EXISTENTE SE PRECISAR */
		#chatUI {
			display: none !important;
			/* Ou opacity 0 se causar erro */
		}

		/* ELEMENTOS FANTASMAS (Para evitar Crash JS) */
		.ghost-ui {
			position: absolute;
			visibility: hidden;
		}

		/* HUD IN-GAME (Visível e Interativo se necessário) */
		#gameUI {
			display: block !important;
			visibility: visible !important;
			opacity: 1 !important;
			pointer-events: none;
			/* HUD geralmente não clica, mas deixa ver */
		}

		#inGameUI,
		#aimDot,
		#timerDisplay,
		#ammoDisplay,
		#healthHolder,
		#weaponDisplay,
		#killCardHolder {
			display: block !important;
			visibility: visible !important;
			opacity: 1 !important;
			pointer-events: none;
		}

		/* MIRA SNIPER (Oculta) */
		#aimRecticle {
			display: none !important;
		}

		body {
			background: #000;
			overflow: hidden;
		}

		canvas {
			display: block !important;
			z-index: 1;
			pointer-events: auto !important;
			/* IMPORTANTE PARA CLICK */
		}
	</style>
</head>

<body oncontextmenu="return false;">

	<!-- HOOK -->
	<script src="./js/websocket-hook.js"></script>

	<!-- LIBS (LOCAL - OFFLINE MODE) -->
	<script src="./libs/jquery.min.js"></script>
	<script src="./libs/howler.min.js"></script>
	<script src="./libs/tween.min.js"></script>

	<!-- CANVAS -->
	<canvas id="game-overlay" style="position: absolute; pointer-events: none;"></canvas>

	<!-- PLACEHOLDERS PARA EVITAR CRASH -->
	<div id="uiBase">
		<!-- Telas de Menu (Ocultas pelo CSS acima) -->
		<div id="menuHolder">
			<div id="menuHider">
				<div id="subLogoButtons">
					<div id="menuBtnHost"></div>
					<div id="menuBtnBrowser"></div>
					<div id="menuBtnJoin"></div>
					<div id="menuBtnRanked"></div>
					<div id="menuBtnShop"></div>
					<div id="menuBtnChall"></div>
					<div id="menuBtnMaps"></div>
					<div id="menuBtnMods"></div>
					<div id="menuBtnSettings"></div>
					<div id="menuBtnSocial"></div>
					<div id="inviteBtn"></div>
				</div>
				<div id="menuClassContainer"></div>
				<div id="windowHolder"></div>
				<div id="endTable"></div>
				<div id="menuFPSDisplay" class="ghost-ui"></div>
			</div>
		</div>

		<!-- HUD e Elementos de Jogo -->
		<div id="gameUI">
			<div id="inGameUI">
				<div id="reticle"></div>
				<div id="ammoDisplay"></div>
				<div id="healthHolder"></div>
				<div id="timerDisplay"></div>
				<div id="leaderDisplay"></div>
				<div id="chatList"></div>
				<div id="ingameFPS"></div>
				<div id="fpsDisplay"></div>
				<div id="pingDisplay"></div>
				<div id="curGameInfo"></div>
				<div id="teamScores"></div>
			</div>
			<div id="instructionHolder">
				<div id="instructions">GO</div>
			</div>
			<div id="killCardHolder"></div>
			<div id="victorySub"></div>
			<div id="chatUI">
				<div id="chatHolder"></div>
			</div>
		</div>

		<div id="consentBlock">
			<div id="consentShake">
				<div id="consentWindow">
					<div id="termsInfo"></div>
					<div class="termsBtn" onclick="agreeTerms()">Agree</div>
				</div>
			</div>
		</div>
		<div id="spectateUI"></div>
		<div id="errorNotification"></div>
		<div id="aHolder"></div>

		<!-- Extra Safety Elements -->
		<div id="customizeBtn" class="ghost-ui"></div>
		<div id="customizeButton" class="ghost-ui"></div> <!-- Alias para evitar ReferenceError -->

		<div id="policeBtn" class="ghost-ui"></div>

		<div id="mailCount" class="ghost-ui"></div>
		<div id="newsHolder" class="ghost-ui"></div>
		<div id="voiceDisplay" class="ghost-ui"></div>

		<div id="inviteBox" class="ghost-ui"></div>
		<div id="inviteButton" class="ghost-ui"></div> <!-- Alias para evitar ReferenceError -->

		<!-- Fix ReferenceErrors -->
		<div id="purchaseHolder" class="ghost-ui"></div>
		<input id="chatInput" class="ghost-ui" type="text" />
		<div id="specStats" class="ghost-ui"></div>
		<div id="speakerDisplay" class="ghost-ui"></div>
		<div id="bloodDisplay" class="ghost-ui"></div>
		<div id="deathCount" class="ghost-ui"></div>
		<div id="recTimer" class="ghost-ui"></div>
		<div id="purchaseLoad" class="ghost-ui">
			<div id="purchLoadRing" class="ghost-ui"></div>
			<div id="purchaseLabel" class="ghost-ui"></div>
		</div>
		<div id="weaponDisplay" class="ghost-ui"></div>
		<div id="menuUtilProfilePic" class="ghost-ui"></div>
	</div>

	<!-- Miras -->
	<div id="aimRecticle"><img id="recticleImg" src="./textures/recticle.png"></div>
	<img id="aimDot" src="./textures/dots/dot_0.png">

	<!-- GAME CODE -->
	<script src="libs/oscillator8.js"></script>
	<script src="libs/zip.js"></script>
	<script src="libs/zip-ext.js"></script>
	<script src="js/game.js"></script>

	<script>
		window.onload = function () {
			window.focus();
			document.body.click();
			document.body.addEventListener('click', () => {
				document.body.requestPointerLock = document.body.requestPointerLock ||
					document.body.mozRequestPointerLock;
				document.body.requestPointerLock();
			});
		};
	</script>
</body>

</html>